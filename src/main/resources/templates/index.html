<!--
  ~ Copyright (c) 2020. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
  ~ Morbi non lorem porttitor neque feugiat blandit. Ut vitae ipsum eget quam lacinia accumsan.
  ~ Etiam sed turpis ac ipsum condimentum fringilla. Maecenas magna.
  ~ Proin dapibus sapien vel ante. Aliquam erat volutpat. Pellentesque sagittis ligula eget metus.
  ~ Vestibulum commodo. Ut rhoncus gravida arcu.
  -->

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <link href="favicon.ico" rel="shortcut icon"/>
    <meta charset="UTF-8">
    <title>Money changer</title>
    <META CONTENT="money, dolar, euro" NAME="KEYWORDS">
    <link href="style.css" rel="stylesheet" type="text/css"/>

    <meta content="width=device-width,initial-scale=1" name="viewport">
    <link href="form.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <meta content="origin" name="referrer">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js"></script>
</head>

<body style="background-color: #cffccf; background-image: url('dolar.jpg') ">

<h1 align="center">MONEY CHANGER</h1>
<h2 align="center">Here you can check value of your money.</h2>
<table border="normal" align="center" style="background-color: #cffccf">
    <tr>
        <td align="center" width="34%"><h2>Last NBP currency rates <span th:text="${lastdate}"/></h2></td>
        <td align="center" width="33%"><h2>Calc PLN value into selected currency</h2></td>
        <td align="center" width="33%"><h2>Calc one currency value into other currency</h2></td>
    </tr>
    <tr>
        <td width="34%">
            <ul id="alldata">
            </ul>
        </td>
        <td align="center" width="33%">
            <h4>Select other currency:</h4>
            <select id="alloption" name="list">
            </select>
            <br>
            <h4>Put your PLN:</h4>
            <br>
            <input id="cash" type="number" value="0"><br>
            <button id="calculate" onclick="calculate()">Calculate</button>
            <h4>In this currency you your cash value is: </h4>
            <h4><p id="result">0</p></h4>
        </td>
        <td align="center" width="33%">
            <h4>Select base currency:</h4>
            <select id="alloption2" name="list2">
            </select>
            <br>
            <h4>Put amount of base currency:</h4>
            <br>
            <input id="cash2" type="number" value="0"><br>
            <h4>Select other currency:</h4>
            <select id="alloption3" name="list3">
            </select>
            <br>
            <button id="calculate2" onclick="calculate2()">Calculate</button>
            <h4>In this currency you your cash value is: </h4>
            <h4><p id="result2">0</p></h4>
        </td>
    </tr>
    <tr align="center">
        <td>Gold PLN price: <p id="goldresult"></p> / gram</td>
        <td>Binance BTC price: <p id="btcrate"></p> USD</td>
        <td>Binance ETH price: <p id="ethrate"></p> USD</td>
    </tr>
</table>

<h2 align="center">Graph of USD changes in the last year</h2>
<canvas height="200" id="myChart" width="200"></canvas>

<script>
$.getJSON("https://api.nbp.pl/api/exchangerates/rates/a/usd/last/253/?format=json", function(data) {
   var labels = data.rates.map(function(e) {
      return e.effectiveDate;
   });
   var data = data.rates.map(function(e) {
      return e.mid;
   });

   var ctx = document.getElementById('myChart').getContext('2d');
   var chart = new Chart(ctx, {
      type: 'line',
      data: {
         labels: labels,
         datasets: [{
            backgroundColor: 'rgb(129, 198, 2228)',
            borderColor: 'rgb(0, 150, 215)',
            data: data
         }]
      },
      options: {
         responsive: 'true',
      }
   });
});
</script>

</body>

<script src="api.js"></script>
</html>